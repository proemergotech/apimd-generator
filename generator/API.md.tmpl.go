package generator

const apimdTmpl = "{{- define \"base\" -}}\nFORMAT: 1A\n\n# {{ .Name }}\n\nGENERATED, DO NOT EDIT, to regenerate:\n{{-     range .Usage }}\n- {{ . }}\n{{-     end }}\n\n{{-     range .Categories }}\n{{-         if .Groups }}\n\n## Group {{ .Name }}\n{{-             range .Groups }}\n\n### {{ .Name }} [{{ if .Prefix }}{{ .Prefix }}{{ else }}/{{ end }}]\n{{-                 $prefix := .Prefix }}\n{{-                 range .Routes }}\n\n#### {{ .Name }} [{{ .Method }} {{ $prefix }}{{ .Path }}]\n{{-                     if .Description }}\n{{-                         range .Description }}\n{{ . }}\n{{-                         end }}\n{{-                     end }}\n{{-                     if or .Params .Query }}\n\n+ Parameters\n{{-                         range $key, $value := .Query }}\n    + `{{ $key }}`: `{{ $value.Value }}` {{ template \"meta\" $value }}\n{{-                        end }}\n{{-                         range $key, $value := .Params }}\n    + `{{ $key }}`: `{{ $value.Value }}` {{ template \"meta\" $value }}\n{{-                         end }}\n{{-                     end }}\n{{-                     if .RequestBody }}\n\n+ Request\n{{-                         if isValue .RequestBody }}\n\n        {{ .RequestBody.Value }}\n{{-                         else }}\n    + Attributes\n{{- template \"attributes\" dict \"Value\" .RequestBody \"Indent\" 8 }}\n{{-                         end }}\n{{-                     end }}\n{{-                     if .ResponseBodies }}\n{{-                         range $statusCode, $responseBody := .ResponseBodies }}\n\n+ Response {{ dig3 $statusCode }}\n{{-                             if $responseBody }}\n{{-                                 if isValue $responseBody }}\n\n        {{ $responseBody.Value }}\n{{-                                 else }}\n    + Attributes\n{{- template \"attributes\" dict \"Value\" $responseBody \"Indent\" 8 }}\n{{-                                 end }}\n{{-                             end }}\n{{-                         end }}\n{{-                     end }}\n{{-                 end }}\n{{-             end }}\n{{-         end }}\n{{-     end }}\n{{ end }}\n\n{{ define \"attributes\" }}\n{{-     $indent := .Indent }}\n{{-     $parentArray := isArray .Value }}\n{{-     range $key, $value := .Value }}\n{{-         if isValue $value }}\n{{-             if $parentArray }}\n{{ indent $indent }}+ `{{ $value.Value }}` {{ template \"meta\" $value }}\n{{-             else }}\n{{ indent $indent }}+ `{{ $key }}`: `{{ $value.Value }}` {{ template \"meta\" $value }}\n{{-             end }}\n{{-         else }}\n{{-             if $parentArray }}\n{{ indent $indent }}+ (object)\n{{-             else }}\n{{ indent $indent }}+ `{{ $key }}` {{- if isArray $value }}(array){{ end }}\n{{-             end }}\n{{- template \"attributes\" dict \"Value\" $value \"Indent\" (add $indent 4) }}\n{{-         end }}\n{{-     end}}\n{{- end }}\n\n{{ define \"meta\" -}}\n({{ .APIMDType }}{{ if .Opt }}, optional{{end}}){{ if .Desc }} - {{ .Desc }}{{ end }}\n{{- end }}\n"
